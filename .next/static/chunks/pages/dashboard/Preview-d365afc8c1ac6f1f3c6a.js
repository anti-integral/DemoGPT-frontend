(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[312],{3580:function(e,t,r){"use strict";var n=r(7445),o=r.n(n),a=r(5893);t.Z=function(){return(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"fixed top-0 left-0 z-50 w-screen h-screen flex items-center justify-center bg-black bg-opacity-30",children:(0,a.jsxs)("div",{className:"bg-white border py-2 px-5 rounded-lg flex items-center flex-col",children:[(0,a.jsxs)("div",{className:"".concat(o().LoaderDots," block relative w-20 h-5 mt-2"),children:[(0,a.jsx)("div",{className:"absolute top-0 mt-1 w-3 h-3 rounded-full bg-green-500"}),(0,a.jsx)("div",{className:"absolute top-0 mt-1 w-3 h-3 rounded-full bg-green-500"}),(0,a.jsx)("div",{className:"absolute top-0 mt-1 w-3 h-3 rounded-full bg-green-500"}),(0,a.jsx)("div",{className:"absolute top-0 mt-1 w-3 h-3 rounded-full bg-green-500"})]}),(0,a.jsx)("div",{className:"text-gray-500 text-xs font-light mt-2 text-center",children:"Please wait..."})]})})})}},9914:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var n=r(266),o=r(809),a=r.n(o),s=r(7294),c=r(9008),i=r(3580),u=r(2809),l=r(3651),d=r(5733),p=r(3636),f=r(1664),h=r(5893);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var j=function(e){e.response;var t=e.setResponse,r=e.setIsLoading,o=(0,s.useState)(!1),c=o[0],i=o[1],x=(0,s.useState)({editPrompt:""}),j=x[0],m=x[1],b=function(){i(!1)},g=function(){var e=(0,n.Z)(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("projectId"),r(!0),e.prev=2,n=localStorage.getItem("token"),e.next=6,p.Z.post("".concat("http://localhost:8000","/edit"),v({projectID:t},j),{headers:{Authorization:"Bearer ".concat(n)}});case 6:e.sent.data&&(r(!1),b(),w()),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),r(!1),console.error(e.t0);case 14:r(!1);case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,n.Z)(a().mark((function e(){var n,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.prev=1,n=localStorage.getItem("token"),e.next=5,p.Z.post("".concat("http://localhost:8000","/renderoutput"),"",{headers:{Authorization:"Bearer ".concat(n)}});case 5:(o=e.sent).data&&(r(!1),b(),t(o.data)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),r(!1),console.error(e.t0);case 13:r(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return(0,h.jsxs)("div",{className:"w-full flex items-center justify-between my-2",children:[(0,h.jsx)("div",{}),(0,h.jsxs)("div",{className:"flex items-center justify-around gap-2 px-5",children:[(0,h.jsx)("div",{children:(0,h.jsx)(f.default,{href:"/dashboard",passHref:!0,children:(0,h.jsx)(l.Button,{iconLeft:d.EditIcon,children:(0,h.jsx)("span",{children:"Dashboard"})})})}),(0,h.jsx)("div",{children:(0,h.jsx)(l.Button,{iconLeft:d.EditIcon,onClick:function(){i(!0)},children:(0,h.jsx)("span",{children:"Edit"})})})]}),(0,h.jsxs)(l.Modal,{isOpen:c,onClose:b,children:[(0,h.jsx)(l.ModalHeader,{children:"Edit"}),(0,h.jsx)(l.ModalBody,{children:(0,h.jsxs)(l.Label,{className:"mt-4",children:[(0,h.jsx)("span",{children:"Explain your application app idea *"}),(0,h.jsx)(l.Textarea,{value:j.editPrompt,name:"editPrompt",onChange:function(e){var t=e.target,r=t.name,n=t.value;m(v(v({},j),{},(0,u.Z)({},r,n)))},className:"mt-3",rows:3,placeholder:"Enter some long form content."})]})}),(0,h.jsxs)(l.ModalFooter,{children:[(0,h.jsx)("div",{className:"hidden sm:block",children:(0,h.jsx)(l.Button,{layout:"outline",onClick:b,children:"Cancel"})}),(0,h.jsx)("div",{className:"hidden sm:block",children:(0,h.jsx)(l.Button,{onClick:g,children:"Submit"})})]})]})]})},m=r(1163),b=function(){var e=(0,n.Z)(a().mark((function e(t){var r,n,o,s,c=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:"post",n=c.length>2&&void 0!==c[2]?c[2]:"",e.prev=2,o=localStorage.getItem("token")){e.next=7;break}throw console.error("Token not found"),new Error("Token not found");case 7:return e.next=9,(0,p.Z)({method:r,url:"".concat("http://localhost:8000","/").concat(t),data:n,headers:{Authorization:"Bearer ".concat(o)}});case 9:return s=e.sent,e.abrupt("return",s.data);case 13:throw e.prev=13,e.t0=e.catch(2),e.t0.response&&"Access token not valid"===e.t0.response.data.detail&&(0,m.useRouter)().push("/dashboard/login"),console.error("API call error:",e.t0),e.t0;case 18:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=(0,m.useRouter)(),t=e.query.data,r=(0,s.useState)(""),o=r[0],u=r[1],l=(0,s.useState)(!1),d=l[0],p=l[1],f=(0,s.useState)(),x=f[0],v=f[1],g=(0,s.useState)(""),w=g[0],k=g[1];console.log("data",x);var y=function(){var t=(0,n.Z)(a().mark((function t(){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(!0),t.prev=1,t.next=4,b("generate","post",x);case 4:(r=t.sent)&&(p(!1),localStorage.setItem("projectId",r.result.project_id),_()),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(1),p(!1),t.t0.response&&"Access token not valid"===t.t0.response.data.detail&&e.push("/dashboard/login"),console.error("Error fetching HTML:",t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}(),_=function(){var e=(0,n.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=2;break}return e.abrupt("return");case 2:return p(!0),e.prev=3,e.next=6,b("renderoutput");case 6:(t=e.sent)&&(p(!1),u(t)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),p(!1);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){w&&u(w)}),[w]),(0,s.useEffect)((function(){if(t){var e=JSON.parse(t);v(e)}}),[t]),(0,s.useEffect)((function(){x&&y()}),[null===x||void 0===x?void 0:x.appIdea]),(0,h.jsx)(h.Fragment,{children:d?(0,h.jsx)(i.Z,{}):(0,h.jsxs)("div",{children:[(0,h.jsx)(c.default,{children:(0,h.jsx)("title",{children:"Render HTML"})}),(0,h.jsx)(j,{response:w,setResponse:k,setIsLoading:p}),(0,h.jsx)("div",{dangerouslySetInnerHTML:{__html:o}})]})})}},3304:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/Preview",function(){return r(9914)}])},7445:function(e){e.exports={LoaderDots:"Loader_LoaderDots__3KR3Y",LoaderDots1:"Loader_LoaderDots1__ePV32",LoaderDots2:"Loader_LoaderDots2__37EUu",LoaderDots3:"Loader_LoaderDots3__1uD04"}},9008:function(e,t,r){e.exports=r(639)}},function(e){e.O(0,[256,528,733,774,888,179],(function(){return t=3304,e(e.s=t);var t}));var t=e.O();_N_E=t}]);